import React, { useEffect, useState } from "react";
import { Container, Col, Row } from "react-bootstrap";
import Notification from "./Notification";
import logo from "../icons/tic-tac-toe-logo.png";
import { Link } from "react-router-dom";
import { Menu, Dropdown, Button, Modal } from "antd";
import SearchBar from "./SearchBar";
import ColleagueData from "../MOCK_DATA.json";
import OnlinePlayers from "./OnlinePlayers";
import players from "../persondata.json";
import Icon from "@ant-design/icons";
import Leaderboard from "./homeSubComponents/Leaderboard";

const LeadboardSVG = () => (
  <svg
    width="42"
    height="34"
    viewBox="0 0 42 34"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M40.707 16.4104C39.8753 15.4953 38.7708 14.9918 37.596 14.9918C37.5931 14.9918 37.5901 14.9918 37.5872 14.9918L31.0134 15.0059C31.0121 15.0059 31.0108 15.0059 31.0095 15.0059C30.4913 15.0059 30.0041 14.7838 29.6372 14.3802C29.2695 13.9755 29.0668 13.4373 29.0668 12.8645V4.85451C29.0668 2.17775 27.091 0 24.6625 0H16.9547C15.7779 0 14.6717 0.505152 13.8398 1.42251C13.0079 2.33987 12.55 3.5593 12.5504 4.85623L12.5529 12.8429C12.5531 13.4151 12.3511 13.9529 11.9841 14.3576C11.6172 14.7622 11.1292 14.985 10.6101 14.985H4.40443C1.97581 14.985 0 17.1628 0 19.8395V28.7455C0 31.4222 1.97581 33.6 4.40435 33.6H37.5957C40.0242 33.6 42 31.4222 42 28.7455V19.8463C42.0001 18.5479 41.5409 17.3276 40.707 16.4104ZM39.5386 28.7455H39.5386C39.5386 29.9262 38.667 30.8869 37.5957 30.8869H4.40435C3.3331 30.8869 2.46152 29.9262 2.46152 28.7455V19.8395C2.46152 18.6588 3.3331 17.6981 4.40435 17.6981H10.61C11.7868 17.6981 12.893 17.193 13.7249 16.2756C14.5569 15.3583 15.0148 14.1388 15.0144 12.8419L15.0118 4.85523C15.0117 4.28308 15.2136 3.7452 15.5806 3.34059C15.9476 2.93598 16.4356 2.7131 16.9547 2.7131H24.6624C25.7337 2.7131 26.6052 3.67377 26.6052 4.85451V12.8645C26.6052 14.163 27.0645 15.3832 27.8983 16.3005C28.7301 17.2156 29.8346 17.7191 31.0094 17.719C31.0123 17.719 31.0153 17.719 31.0182 17.719L37.592 17.7049C37.5934 17.7049 37.5946 17.7049 37.5959 17.7049C38.1141 17.7049 38.6014 17.9271 38.9682 18.3307C39.336 18.7353 39.5386 19.2735 39.5386 19.8463V28.7455H39.5386Z"
      fill="#F5F5F5"
    />
    <path
      d="M21.8696 5.45667C21.701 5.33588 21.515 5.27539 21.3113 5.27539C21.1703 5.27539 21.0566 5.30568 20.9706 5.36599L19.4194 6.40224C19.1921 6.54917 19.0786 6.77783 19.0786 7.08868C19.0786 7.296 19.1333 7.48171 19.2431 7.64573C19.3527 7.80983 19.4898 7.89184 19.6544 7.89184C19.7561 7.89184 19.8542 7.85748 19.9481 7.78822L20.2889 7.55504V14.1478C20.2889 14.3466 20.3789 14.4998 20.5592 14.6076C20.7393 14.7156 20.9547 14.7694 21.2055 14.7694C21.4562 14.7694 21.6715 14.7156 21.8518 14.6076C22.032 14.4997 22.1221 14.3464 22.1221 14.1478V5.91002C22.1222 5.72874 22.0379 5.57783 21.8696 5.45667Z"
      fill="#F5F5F5"
    />
    <path
      d="M10.8995 27.1689H7.80073V27.0511C7.80073 26.8415 7.92755 26.6125 8.18152 26.3635C8.43549 26.1148 8.74155 25.8594 9.09978 25.5975C9.45777 25.3356 9.81403 25.0475 10.1682 24.7331C10.5224 24.419 10.8255 24.0304 11.0775 23.5678C11.3294 23.1053 11.4553 22.6118 11.4553 22.0881C11.4553 21.2847 11.1799 20.6462 10.629 20.1726C10.0782 19.699 9.43701 19.4622 8.70529 19.4622C7.99548 19.4622 7.37737 19.6888 6.85097 20.1422C6.3245 20.5955 6.06142 21.1978 6.06142 21.949C6.06142 22.6485 6.33188 22.9982 6.87312 22.9982C7.15925 22.9982 7.38918 22.9222 7.56317 22.7697C7.73708 22.6176 7.82411 22.4382 7.82411 22.232C7.82411 21.8824 7.90746 21.6271 8.07423 21.4658C8.241 21.3045 8.45518 21.2237 8.71719 21.2237C9.01874 21.2237 9.24498 21.3176 9.39583 21.5053C9.54653 21.6932 9.62208 21.909 9.62208 22.1535C9.62208 22.4591 9.49304 22.7734 9.23505 23.0964C8.97706 23.4195 8.66165 23.7295 8.28849 24.0262L7.20962 24.9167C6.85344 25.2121 6.54934 25.5465 6.29775 25.9201C6.04625 26.2937 5.92041 26.6673 5.92041 27.0409V28.3049C5.92041 28.4787 6.00851 28.6265 6.18488 28.7481C6.36116 28.8697 6.53925 28.9305 6.71956 28.9305H10.9031C11.0518 28.9305 11.1811 28.8399 11.2908 28.6584C11.4004 28.4771 11.4553 28.2699 11.4553 28.0367C11.4553 27.8035 11.4 27.6008 11.2897 27.428C11.1791 27.2553 11.049 27.1689 10.8995 27.1689Z"
      fill="#F5F5F5"
    />
    <path
      d="M35.2631 23.9305C35.5473 23.785 35.7703 23.5197 35.9322 23.1343C36.0939 22.7492 36.1749 22.3127 36.1749 21.8245C36.1749 20.2495 35.2995 19.4619 33.5485 19.4619C32.6299 19.4619 31.9528 19.6974 31.517 20.1679C31.0811 20.6386 30.8634 21.1761 30.8634 21.7804C30.8634 22.1087 30.9205 22.3267 31.0349 22.4345C31.1493 22.5426 31.4117 22.5964 31.822 22.5964C32.145 22.5964 32.3696 22.5351 32.4956 22.4121C32.6216 22.2893 32.6848 22.1091 32.6848 21.8719C32.6848 21.6347 32.7548 21.4673 32.8949 21.3699C33.0348 21.2723 33.2527 21.2236 33.5485 21.2236C34.1244 21.2236 34.4123 21.5306 34.4123 22.1445C34.4123 22.3918 34.387 22.5942 34.3365 22.7519C34.2861 22.9097 34.2122 23.0205 34.115 23.0844C34.0179 23.1483 33.9245 23.191 33.8354 23.2123C33.746 23.2337 33.6352 23.2443 33.5032 23.2443C33.1534 23.2443 32.9786 23.5034 32.9786 24.0214C32.9786 24.5394 33.1531 24.7985 33.5019 24.7985C33.868 24.7985 34.1464 24.8698 34.3374 25.0123C34.5284 25.1548 34.6239 25.429 34.6239 25.8348V26.0809C34.6239 26.5041 34.544 26.8042 34.3843 26.9811C34.2245 27.1581 33.946 27.2466 33.5485 27.2466C32.8552 27.2466 32.5085 26.9962 32.5085 26.4953C32.5085 26.245 32.4434 26.0702 32.3131 25.9708C32.183 25.8718 31.9325 25.8219 31.5616 25.8219C31.2307 25.8219 31.0021 25.8737 30.8762 25.9774C30.7501 26.081 30.687 26.2753 30.687 26.5603C30.687 27.1907 30.9224 27.7563 31.3935 28.2571C31.8647 28.758 32.5636 29.0084 33.49 29.0084C34.3813 29.0084 35.0985 28.7709 35.6419 28.296C36.1852 27.8212 36.4569 27.0829 36.4569 26.0811V25.835C36.4569 24.8935 36.0588 24.2587 35.2631 23.9305Z"
      fill="#F5F5F5"
    />
  </svg>
);

const LeadboardIcon = (props) => <Icon component={LeadboardSVG} {...props} />;

const Lobby = () => {
  const [rounds, setRounds] = useState("ROUNDS");
  const [playerData, setPlayerData] = useState([]);
  const [modalVisible, setModalVisible] = useState(false);

  const menu = (
    <Menu>
      <Menu.Item className="menu-item" onClick={() => setRounds("3")}>
        3
      </Menu.Item>
      <Menu.Item className="menu-item" onClick={() => setRounds("5")}>
        5
      </Menu.Item>
    </Menu>
  );

  useEffect(async () => {
    const onlinePlayerList = players
      .filter((player) => player.status == "online")
      .map((player, index) => <OnlinePlayers key={index} player={player} />);
    setPlayerData(onlinePlayerList);
  });

  return (
    <div>
      <Container style={{ margin: 10 }} fluid={true}>
        <Row>
          <Col md={6}>
            <div className="">
              <div className="menu-container">
                <div className="title">
                  <span className="title-green">Tic</span>-
                  <span className="title-orange">Tac</span>-
                  <span className="title-green">Toe</span>
                </div>
                <div className="title-logo">
                  <img src={logo} alt="tictactoe-logo" width="260px" />
                </div>
                <h2>Challenge a friend</h2>
                <div className="rounds-txt">NUMBER OF ROUNDS</div>
                <div>
                  <Dropdown
                    className="no-of-rounds"
                    overlay={menu}
                    placement="bottomCenter"
                  >
                    <Button>{rounds}</Button>
                  </Dropdown>
                </div>
                <div className="menu-list">
                  <Row className="gap">
                    <Link to="/gamehub/tictactoe/play">
                      <button className="orange">MENU </button>
                    </Link>
                    <Link to="/gamehub/tictactoe">
                      <button className="blue">EXIT </button>
                    </Link>
                  </Row>
                </div>
              </div>
            </div>
          </Col>
          <Col md={5}>
            <Row>
              <Col md={10}>
                <SearchBar
                  placeholder="Search a colleague"
                  data={ColleagueData}
                />
              </Col>
              <Col style={{ padding: "4% 0 0 0" }}>
                <Notification />
              </Col>
              <Col
                style={{
                  padding: "4% 0 0 0",
                }}
              >
                <Button
                  className="leadboard-button"
                  shape="circle"
                  icon={
                    <LeadboardIcon
                      style={{ color: "#f5f5f5", fontSize: "30px" }}
                    />
                  }
                  onClick={() => setModalVisible(true)}
                />
              </Col>
            </Row>
            <Row>
              <div className="online-list">
                <div className="online-player-list">{playerData}</div>
              </div>
            </Row>
          </Col>
        </Row>
      </Container>

      <Modal
        centered
        visible={modalVisible}
        footer={null}
        onCancel={() => setModalVisible(false)}
        className="modalNotify notification"
      >
        <Leaderboard />
      </Modal>
    </div>
  );
};

export default Lobby;
